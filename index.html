<!DOCTYPE html>
<html>
<link rel="stylesheet" href="full-card.css">
<link rel="stylesheet" href="pointer.css">
<link rel="stylesheet" href="snackbar.css">
<head>
<style>

.token {
    margin-right: 4px;
    width: 90px; height: 90px;
    display: inline-block;
    position: relative;    
}
.cardback {
    margin-right:4px;
    width: 64px; height: 90px;
    display: inline-block;
}

/* Style the header */
.header {
  background-color: #f1f1f1;
  padding: 30px;
  text-align: center;
  font-size: 35px;
  font-family: 'Special Elite', serif;
}
.action
{
  line-height: 30px;
}
.action .edit {
	border: solid 1px;
    background-color: #f1f1f1;
    
    padding: 4px;
    margin: 4px;
    height: 30px;
}
.action .button {
    padding: 4px;
    margin: 4px;
	height: 30px;
    width: 90px;
	
    background-color: #4CAF50; /* Green background */
    border: 1px solid green; /* Green border */
    color: white; /* White text */
    cursor: pointer; /* Pointer/hand icon */
    display: inline-block;
}
.about, .action {
  background-color: #f1f1f1;
  padding: 5px;
  text-align: center;
  font-family: 'Arial';
}
.about p { 
    width: 75%; 
    margin: 25px auto 25px auto;
}

</style>
<script src="gawm.js"></script>
<script>

function start()
{
    document.getElementById('landing').style.display = "none";
    new_game(get_contenteditable('user_name'));
}

function join()
{
    document.getElementById('landing').style.display = "none";
    add_player(
        get_contenteditable('user_game_code'), 
        get_contenteditable('user_name')
    );
}

function getParameterByName(name, url) 
{
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, '\\$&');
    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}

function body_onload()
{
    load_cards();
    
    // pre-fill editable
    
    var game_id = getParameterByName('ugc');
    if (game_id) document.getElementById('user_game_code').innerHTML = game_id;
    
    var name = getParameterByName('un');
    if (name) document.getElementById('user_name').innerHTML = name;

    var action = getParameterByName('a');  
    if (action == 'join_game') join();
}

</script>
</head>

<body onload="body_onload()">

<textarea id="debug" name="text"></textarea>
<input type="button" onclick="reload()" value="Refresh"/>
<input type="button" onclick="next(game)" value="Next"/>

<div id="landing">
  <div class="header">
    <h1>Getting Away With Murder</h1>
    <h2>A Murder Mystery Role Play Game</h2>
  </div>
  <div class="about"><p>
  GAWM is not a video game. It is a tabletop story telling game played with a deck of cards around a table.</p>
  <p>This website replaces that pack of card, so you can play with your friends safely from home. It is not a matchmaking service. GAWM is a 4-6 player game. You will need to organise with your friends.</p><p>
  This website doesn't provide VOIP or Video chat. You'll need to use some other service. There are lots out there.
  Use your favourite. </p><p> Got your friends? Read the rules? Let's go:
  </p></div>
  <div class="action">
  <div class="row">
   <span>Enter your name, </span><span id="user_name" class="edit" contenteditable="true">Player_1</span><span>and:</span>
   </div>
   <div>
   <div id="new_game" class="button" onclick="start()">Create</div> a <span id="player_count" class="edit" contenteditable="true">4</span> player game, or</div>
   <div>
   <div id="join_game" class="button" onclick="join()">Join</div> using a game id <span id="user_game_code" class="edit" contenteditable="true">0000</span>.
   </div>
  </div>
</div>

<div id="players"></div>
<div id="snackbar"></div>

</body>
</html>
